<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Food Delivery App</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <style>
    </style>

    <!-- Bootstrap Core CSS -->


<!-- <link rel="stylesheet" href="//cdn.jsdelivr.net/jquery.bootstrapvalidator/0.5.0/css/bootstrapValidator.min.css"/>

<script type="text/javascript" src="//cdn.jsdelivr.net/jquery.bootstrapvalidator/0.5.0/js/bootstrapValidator.min.js"></script>
 -->  
 <script src="../js/userSpecificMenu.js"></script>
<script> 


        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById("subscription").style.display='None';
        }, false);

        function handleClick(myRadio) {
            if(document.querySelector('input[name="usertype"]:checked').value=="0")
            {
                document.getElementById("subscription").style.display='block';
            }
            else
            {
                document.getElementById("subscription").style.display='None';
            }

        } 
      

        function registerOnClick() {
        	
        	 let uname = document.getElementById("idusername").value;
             let email=document.getElementById("idemail").value;
             let password=document.getElementById("idpassword").value;
             let fullname=document.getElementById("idfname").value;
             let address=document.getElementById("idaddress").value;
             let contactnum=document.getElementById("idcontactnum").value;
             let zip=parseInt(document.getElementById("idzip").value);
             if(document.querySelector('input[name="subscrtype"]:checked')!=null)
            	 {
            	 memberType=document.querySelector('input[name="subscrtype"]:checked').value;
            	 }
             else
            	 {
            	 memberType=null;
            	 }
             //let memberTypeparseInt(document.querySelector('input[name="subscrtype"]:checked').value);
             
        	
        	if(zip == "" || uname == "" || email == "" || password == ""  ||zip==""||address=="" ||fullname=="" || address=="" 
           		){
                alert("Please enter all values");
            } 
            else if(document.querySelector('input[name="usertype"]:checked') == null) 
           	 {
           	 alert("User Type not selected");
           	 }
            else
            	{
        	//console.log("registerOnClick");
             // let license_no = document.getElementById("license").value;
             // let name = document.getElementById("Name").value;
             // let emailId = document.getElementById("inputEmail").value;
             // let zip = document.getElementById("zipcode").value;
             // let password = document.getElementById("inputPassword").value;
             // let street = document.getElementById("street").value;
               
                
                let usertype = parseInt(document.querySelector('input[name="usertype"]:checked').value);
                
                //let memberType = document.querySelector('input[name="subscrtype"]:checked').value;
            	 
                 var date = new Date();
                
                 let data={
                 "userName":uname,
                 "password":password,
                 "fullName": fullname,
                 "password":password,
                 "memberType":memberType,
                 "userType":usertype,
                 "email":email,
                 "contactNumber":contactnum,
                 
                 //yyyy-mm-dd hh:mm:ss
                 "joinedOn":date.getFullYear()+"-"+date.getMonth()+1+"-"+date.getDate()+" "+date.getHours()+":"+date.getMinutes()+":"
                 +date.getSeconds(),
                 "addressDetails":
                 {
                    "address":address,
                    "zipCode":zip
                 }
                     };
                 
             data = JSON.stringify(data);
             console.log(data);
         let xhttp = new XMLHttpRequest();
         let url = "http://localhost:8080/user/addUser";
         console.log("before post");
         xhttp.open("POST", url, true);
         console.log("after post");
         xhttp.setRequestHeader("Content-type", "application/json");
         xhttp.onreadystatechange = function() {
        	 //console.log("readyState"+this.readyState)
        	 //console.log(this.status)
             if(this.readyState == 4 && this.status == 200) {
                 let response = xhttp.responseText;
                 //response = JSON.parse(response);
                 //if(response.code == 200) {
                     //alert(response.message);
                     alert("Registered successfully!")
                     window.location.href = "./index.html"; 
                     /* } else {
                         //alert(response.message);
                     } */
             }
             else if(this.status != 200){
            	 alert("Something is wrong. Please retry...")
             }
         }
         xhttp.send(data);
 
             }
 
        }


        

 
 </script>
 <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</head>

<body>


        <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="#">Baked Food Delivery App
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNavDropdown">
    <ul class="navbar-nav">
      <li class="nav-item active">
        <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">About us</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Contact</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Order Food?</a>
      </li>

  </ul>
  </div>
</nav>
</br>

<div class="row">
    <div class = "col-md-6">
    <img src="../img/food_homepage_3.jpg" alt="Home Page" ></br>
    <img src="../img/food_homepage_3.jpg" alt="Home Page" >
    </div>
   <div class = "col-md-6 ">
        <div class="container">
         <h2>Register User</h2>
    <!--form role="form" name="register" id="register-form" -->
    <div class="form-group">
        <label for="uname">Username:</label>
      <input type="text" class="form-control" id="idusername" placeholder="Enter username" name="uname" required="required">
    </div>
    <div class="form-group">
      <label for="pwd">Password:</label>
      <input type="password" class="form-control" id="idpassword" placeholder="Enter password" name="pwd" required="required">
    </div>

    <div class="form-group">
      <label for="fullname">Full Name:</label>
      <input type="text" class="form-control" id="idfname" placeholder="Enter password" name="fullname" required="required">
    </div>
    <div class="form-group" >
        <label for="usertype">User Type:</label>
       <div class="radio" required="required">
  <label><input type="radio" name="usertype" id="user" onclick="handleClick(this);"value="0" >User</label>
</div>
<div class="radio">
  <label><input type="radio" name="usertype" id="owner" onclick="handleClick(this);" value="1" >Restaurant Owner</label>
</div>
<div class="radio disabled">
  <label><input type="radio" name="usertype" id="admin" onclick="handleClick(this);" value="2" >Admin</label>
</div>
    </div>

    <div class="form-group" id="subscription">
        <label for="subscrtype">Subscription Type:</label>
       <div class="radio" required="required">
  <label><input type="radio" name="subscrtype" id="normal" value="0">Normal</label>
</div>
<div class="radio">
  <label><input type="radio" name="subscrtype" id="silver" value="1">Silver</label>
</div>
<div class="radio">
  <label><input type="radio" name="subscrtype" id="gold" value="2">Gold</label>
</div>
    </div>
    <div class="form-group">
      <label for="email">Email ID:</label>
      <input type="email" class="form-control" id="idemail" placeholder="Enter Email ID" name="email" required="required">
    </div>
 <div class="form-group">
      <label for="contact">Contact No:</label>
      <input type="number" class="form-control" id="idcontactnum" placeholder="Enter Contact number" name="contact"  required="required" maxlength="10">
    </div>
    <div class="form-group">
      <label for="address">Address:</label>
      <input type="text-area" class="form-control" id="idaddress" placeholder="Enter address" name="address" required="required">
    </div>
    <div class="form-group">
      <label for="zipcode">Zip code:</label>
      <input type="text" class="form-control" id="idzip" placeholder="Enter zip code" name="zipcode" required="required" maxlength="5">
    </div>
    <button type="submit" class="btn btn-info" onclick="registerOnClick()">Register</button></br>
    <a href="index.html" role="">Already a member? Sign in</a></br>

<!-- </form> -->
</div>
</div>
</div>



    <!-- <div class="page-wrapper">
        <div class="row">
            <div class="col-md-4 col-md-offset-4">
                <div class="login-panel panel panel-default">
                    <div style="background-color: #8DA77C" class="panel-heading">
                        <h3 class="panel-title">Customer Registeration</h3>
                    </div>
                    <div class="panel-body">
                        <form role="form" name="register"  id="register-form" method="post" action="rentcar.html" >
                            <fieldset>
                                 
             
                <div class="form-group">
                  <div class="form-label-group">
                     <label for="firstName">Name</label>
                    <input type="text" id="Name" name="Name" class="form-control" required="required" autofocus="autofocus"   data-error="Please enter your name" required>
                    
                  </div>
                </div>
              
       
                 <div class="form-group">
                    <div class="form-label-group">
                    <label for="inputAddress2">Street</label>
                    <input type="text" class="form-control" id="street" name="street" placeholder="Apartment, studio, or floor"  data-error="Please enter  your street name"  required>
                  </div>
              </div>
           
                    <div class="form-group ">
                                      <label for="select1">Zipcode</label>
                                      <select id="zipcode" class="form-control" name="zipcode" required>
                                        <option selected>Choose</option>
                                        <option value=15213>15213</option>
                                        <option value=15217>15217</option>
                                        <option value=15232>15232</option>
                                        <option value=44102>44102</option>
                                        <option value=75013>75013</option>

                                      </select>
                                    </div>
                 
               <div class="form-group ">
                        <div class="form-label-group">
                      <label for="inputZip">License</label>
                      <input type="text" id="license" name="license" class="form-control" minlength="8" maxlength="8" required>
                    </div>
                </div>

            
                  <div class="form-group">
                    <div class="form-label-group">
                        <label for="inputEmail">Email</label>
                        <input type="email"  name="email" id="inputEmail" name="email" class="form-control" placeholder="Email address" data-error="email address is invalid" required="required">

                
                    </div>
                </div>

              
              <div class="form-group">
                <div class="form-label-group">
                    <label for="inputPassword">Password</label>
                    <input type="password" id="inputPassword" name="inputPassword" class="form-control" data-minlength="6" placeholder="Password" required="required" minlength="6" data-bv-identical="true"
                data-bv-identical-field="confirmPassword"
                data-bv-identical-message="The password and its confirm are not the same"/>
                <div class="help-block">Minimum of 6 characters</div>
                </div>
            </div>
             <div class="form-group">
                <div class="form-label-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword"  name="confirmPassword" class="form-control" placeholder="Confirm password" data-match="inputPassword" minlength="6"  required="required">
                     <div class="help-block with-errors"></div>
                
                </div>
            </div> -->


                                
                                <!-- Change this to a button or input when using this as a form -->
                                <!-- <div class="text-center">
                                        <a href="#" style="background-color: #8DA77C" class="btn btn-lg btn-success btn-block" onclick="registerOnClick()">Register</a>                             </div>
                                 <div class="text-center">
                            </fieldset>
                        </form>
                           <div class="text-center">
            <a class="d-block small mt-3" href="index.html">Login Page</a> -->
            <!--<a class="d-block small" href="forgot-password.html">Forgot Password?</a>-->
         <!--  </div>
        </div>
                    </div>
                </div>
            </div>
        </div> -->

<script type="text/javascript">

 let password = document.getElementById("inputPassword");
  let confirm_password = document.getElementById("confirmPassword");
  let license_no = document.getElementById("license");

function validatePassword(){
   
  if(password.value != confirm_password.value) {
    confirm_password.setCustomValidity("Passwords Don't Match");
  } else {
    confirm_password.setCustomValidity('');
  }
}

//password.onchange = validatePassword;
//confirm_password.onkeyup = validatePassword;




  
    

        var zip=document.getElementById("idzip");
        var newText = '';
        var  numbers = '0123456789';

function validateZip() {

    
        for (var i=0; i < zip.value.length; i++) {
            if(numbers.indexOf(zip.value[i]) > -1 ) {
                zip.setCustomValidity('');
                newText = newText + zip.value[i];
            }
            else {
                zip.setCustomValidity('invalid zipcode');
            }
        }
    }
zip.onchange=validateZip;

// function validateLicense() {

    
// for (var i=0; i < license_no.value.length; i++) {
//     if(numbers.indexOf(license_no.value[i]) > -1 ) {
//         license_no.setCustomValidity('');
//         newText = newText + license_no.value[i];
//     }
//     else {
//         license_no.setCustomValidity('invalid license_no');
//     }
// }
// }
//license_no.onchange=validateLicense;


</script>

<script>
        // window.onload = function() {
        //     $('form').submit(false);

        // }
 </script> 


    <!-- jQuery -->

   <!--  <script type="text/javascript" src="js/jquery.validate.min.js"></script>-->

</body>

</html>
